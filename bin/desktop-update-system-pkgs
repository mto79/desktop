#!/usr/bin/env bash

STATE_DIR=$HOME/.local/state/desktop

echo -e "\e[32m\nUpdate system packages\e[0m"
sudo dnf -q makecache --refresh
sudo dnf upgrade -y

# Fedora: use dnf needs-restarting to detect if a reboot is recommended/required.
# Non-zero exit status indicates a reboot is needed.
if ! sudo dnf needs-restarting >/dev/null 2>&1; then
  touch $STATE_DIR/reboot-required
fi

echo
